/*!
 * uniGUI Library extension for Sencha Touch
 * by Farshad Mohajeri  
 * Copyright(c) 2009-2017 FMSoft Inc.
 * info@fmsoft.net
 * http://www.unigui.com
 !*/
function uniGetValues(form){var values=form.getValues(),res="",val="",encoder=encodeURIComponent;for(var propertyName in values){var ffield=null;try{ffield=eval(propertyName)}catch(err){ffield=null;if(Ext.isObject(values[propertyName])){var o=values[propertyName];if(o.field){ffield=o.field;propertyName=ffield.nm}}}if(ffield&&ffield.isDirty&&ffield.isDirty()&&ffield.getValue&&!ffield.fieldEditBusy){if(ffield.submitState==undefined){ffield.submitState=0}else{ffield.submitState++}ffield.submitState%=65535;var stVal="";if(ffield.isXType("datepickerfield")){val=_ds_(ffield.getValue())}else{val=ffield.submittedValue=ffield.getValue()}if(val!==null){ffield.fieldEdited=false;if(ffield.stateValue!=undefined){stVal=ffield.stateValue}var stSub=ffield.submitState.toString(16);res+="&"+encoder(propertyName)+"="+encoder("\2"+stSub+"\2"+stVal+"\2"+val)}}}return(res)}function _gmf_(d,c){var b={};for(var a in c){b[a]=d.get(a)}return b}function _sfv_(d,c,a){d.fieldEdited=false;d.suspendEvents();try{if(d.submitState==c||d.submitState==undefined){if(a!==undefined){d.setValue(a)}var b=d.getValue(),e=false;if(Ext.isArray(b)){e=true;b=b.slice(0)}if(b!==null&&!e&&d.resetOriginalValue){d.resetOriginalValue()}else{d.originalValue=b}d.lastValue=(d.getRawValue?d.getRawValue():d.getValue());d.submittedValue=undefined}else{if(a!==undefined){d.setValue(a)}}}finally{d.resumeEvents(true)}}function _rsov_(d,c){var b;if(d.submitState!=undefined&&d.submitState<=c&&d.submittedValue!=undefined){var a=null;if(d.getComponent){a=d.getComponent()}var b=d.submittedValue;if(Ext.isArray(b)){b=b.slice(0)}if(a&&a.hasOwnProperty("originalValue")){a.originalValue=b}else{d.originalValue=b}}}Ext.override(Ext.field.Checkbox,{getValue:function(){var a=this.getChecked();if(a!==true){return(false)}return(a)},setValue:function(a){this.callParent(arguments);this.setChecked(a)},isDirty:function(){return(this.getValue()!==this.originalValue)}});var proto=Ext.event.Controller.prototype;proto.original_Fire=proto.fire;proto.lastTouchEndArgs=null;proto.fire=function(b,c){if(b&&b[0]){if(/touch.*/.test(b[0].type)){this.lastTouchEndArgs=b}else{if(/mouse.*/.test(b[0].type)){var a=1000;if(this.lastTouchEndArgs){a=b[0].time-this.lastTouchEndArgs[0].time}if(a<500){return this}else{this.lastTouchEndArgs=null}}}}return this.original_Fire(b,c)};function AjaxError(a,b){if(_ajxerr){return}_ajxerr=true;Ext.Msg.show({title:"Ajax Error",message:a,buttons:Ext.Msg.OK,fn:function(){_ajxerr=false}})}function uniResizeFrm(a){var b=uniVars._mFrm_;if(b){ajaxRequest(b,"vpsize",{w:a.width,h:a.height})}}Ext.override(Ext.field.Slider,{isDirty:function(){if(this.getDisabled()){return false}return String(this.getValue())!==String(this.originalValue)}});Ext.override(Ext.field.Radio,{getSubmitValue:function(){return{field:this,val:this.getValue()}},initialize:function(){this.callParent();this.on("uncheck",function(a){a.originalValue="\0"},this)},getValue:function(){var a=this.getChecked();if(!a){this.originalValue="\0";return""}return"on"},setValue:function(a){this.callParent(arguments);if(a){this.check()}else{this.uncheck()}return this}});Ext.override(Ext.field.Select,{reset:function(){this.setValue(this.originalValue);return this},isDirty:function(){if(this.getValue()===null){return false}return this.callParent(arguments)}});Ext.override(Ext.field.Spinner,{isDirty:function(){if(this.getDisabled()){return false}var a=this.getComponent();if(a){return String(a.getValue())!==String(a.originalValue)}else{return false}}});Ext.override(Ext.field.Text,{onBlur:function(b){var a=this;a.callParent(arguments);if(a.uniBlurChanged&&(a.trackBlurChange||a.config.trackBlurChange)){a.uniBlurChanged=false;ajaxRequest(a,"blurchange")}}}),Ext.override(Ext.field.Field,{trackKeyup:function(a,b){if(this.isDirty()){return this.trackChange(this,a.getValue())}return true},trackChange:function(c,d,a,b){_hed_(this);return true},initialize:function(){var a=this;a.callParent();a.on("change",a.trackChange,a);a.on("keyup",a.trackKeyup,a)}});Ext.override(Ext.field.Spinner,{reset:function(){this.setValue(this.getValue())}});Ext.override(Ext.Container,{update:function(b,a){if(this.rendered){this.updateDom(b,a);if(this.config.resizeAfterUpdate&&this.rendered){var c=this.getSize();this.setSize(c.width-1,c.height-1);c=this.getSize();this.setSize(c.width+1,c.height+1)}this.fireEvent("afterupdatehtml",this)}},updateDom:function(html,loadScripts){var me=this,id,dom,interval,DOC=document,scriptTagRe=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,replaceScriptTagRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,srcRe=/\ssrc=([\'\"])(.*?)\1/i,typeRe=/\stype=([\'\"])(.*?)\1/i;dom=me.element.dom;if(!dom){return me}html=html||"";if(loadScripts!==true){return this.setHtml(html)}id=Ext.id();html+='<span id="'+id+'" role="presentation"></span>';interval=setInterval(function(){var hd,match,attrs,srcMatch,typeMatch,el,s;if(!(el=DOC.getElementById(id))){return false}clearInterval(interval);Ext.removeNode(el);hd=Ext.getHead().dom;while((match=scriptTagRe.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement("script");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}},20);return this.setHtml(html.replace(replaceScriptTagRe,""))}});Ext.define("Ext.iFrame",{extend:"Ext.Container",mixins:["uniIFrame"],xpainted:function(){var a=Ext.create("Ext.util.DelayedTask",{});a.owner=this;a.cnt=0;a.setScope(a);a.cancel=Ext.emptyFn;a.setFn(function(){if(this.cnt++>600){this.setInterval(null);this.setInterval(null)}else{this.delay(25);try{if(this.owner.iframe){var c=this.owner.getDoc();if(c.body||c.readyState=="complete"){this.cnt=1000;Ext.defer(this.owner.initEditor,10,this.owner)}}}catch(b){_log(b);this.cnt=1000}}});a.delay(25)}});function createMask(a){var c=null;if(a.target){c=a.target;if(c.element){c=c.element}}var b={message:(a.useMsg?a.msg:""),renderTo:c};return new Ext.LoadMask(b)}function _ifrm_(d){function c(j){var g="";j=j.dom;if(j){try{var i=j.contentWindow.document||j.contentDocument||window.frames[j.id].document;if(i){if(Ext.isOpera&&i.location=="about:blank"){return}if(i.body){if((contentNode=i.body.firstChild)&&/pre/i.test(contentNode.tagName)){g=contentNode.textContent}else{if((contentNode=i.getElementsByTagName("textarea")[0])){g=contentNode.value}else{g=i.body.textContent||i.body.innerText}}}}if(g&&g!=""){AjaxSuccess({responseText:g})}}catch(h){var f="";if(g&&g!=""){f=g}AjaxError(h.message,f)}}}var b=document.createElement("iframe");var a=b.style;a.setProperty("visibility","hidden","important");a.setProperty("width","0px","important");a.setProperty("height","0px","important");a.setProperty("position","absolute","important");a.setProperty("border","0px","important");a.setProperty("zIndex","-1000","important");Ext.fly(b).set({id:d,name:d,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL});document.body.appendChild(b);Ext.fly(b).on("load",Ext.Function.bind(c,this,[b]))}function _rndcll_(h,e,j){var c=e.stores[0].grid.getColumns()[j],d=c.config.ct,i=c.config.cf,f="d/m/Y",k="H:i:s";switch(d){case"":return(h);case"number":case"float":return(h);case"boolean":if(!i){i={"false":"false","true":"true"}}if(Ext.isObject(i)){if(Ext.isBoolean(h)){return(i[h])}if(Ext.isNumber(h)){var b=(h!==0);return(i[b])}}return(h);case"datetime":if(h&&h.getDate){var g=false;if(!i){g=true;i=f}if(i.substr(0,2)=="**"){g=true;i=i.slice(2)}if(g){var a=Ext.Date.format(h,"His");if(a=="000000"){return(Ext.Date.format(h,i))}else{return(Ext.Date.format(h,i+" H:i:s"))}}else{return(Ext.Date.format(h,i))}}if(h==null){h=""}return(h);case"time":if(h&&h.getDate){if(!i){i=k}return(Ext.Date.format(h,i))}if(h==null){h=""}return(h);case"date":if(h&&h.getDate){if(!i){i=f}return(Ext.Date.format(h,i))}if(h==null){h=""}return(h);default:return(h)}return h}if(Ext.grid){Ext.override(Ext.grid.plugin.Editable,{isEditor:true,onCancelTap:function(){this.callParent(arguments);ajaxRequest(this.getGrid(),"canceledit",{})},getEnableDeleteButton:function(){return this.config.enableDeleteButton},getRecordByTriggerEvent:function(a){if(a.isModel){return(a)}else{return this.callParent(arguments)}}});function _sge_(c,f,a,e){var b=uniVars._actCnt,d=c.getPlugins();if(c.config.showEditorOnEdit===true){Ext.Array.each(d,function(h){if(h.isEditor){var g=h.config.enableDeleteButton;try{h.config.enableDeleteButton=false;h.onTrigger(c.store.getAt(f))}finally{h.config.enableDeleteButton=g}return false}})}}Ext.define("Ext.form.noSubmitPanel",{extend:"Ext.form.Panel",xtype:"form_nosubmit_panel",getElementConfig:function(){var b=this.callParent();var a=b.children;Ext.Array.each(a,function(c){if(c.tag=="input"&&c.type=="submit"){c.type="hidden"}});return b}})}else{Ext.define("Ext.grid.column.Column",{extend:"Ext.Container"})}function _cgms_(a){}function _src_(b,a){b.setValue(a);_sfc_(b.listControl)}Ext.override(Ext.field.DatePicker,{setValue:function(b){if(Ext.isString(b)){var a=Ext.Date.parse(b,this.config.dateFormat);this.callParent([a])}else{this.callParent(arguments)}}});var eV=Ext.getVersion();if(eV.major==2&&eV.minor==4&&eV.patch==1){Ext.define("Override.util.PaintMonitor",{override:"Ext.util.PaintMonitor",constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}});Ext.define("Override.util.SizeMonitor",{override:"Ext.util.SizeMonitor",constructor:function(a){var b=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new b.OverflowChange(a)}else{if(Ext.browser.is.WebKit||Ext.browser.is.IE11){return new b.Scroll(a)}else{return new b.Default(a)}}}})}function _rndsum_(a){return a}function _getsum_(b,e){if(b&&b.length){var c=false;var f=b[b.length-1].data;var a="_s"+e;res=f[a];return res}return null}function _stn_(a,c){var b=a.store.getNodeById(c);if(b){if(b.isLeaf()){a.goToLeaf(b)}else{a.goToNode(b)}}}Ext.override(Ext.data.Store,{uniApplyId:function(b,c){var a=this;a.suspendEvents();try{a.callParent(arguments)}finally{a.resumeEvents(true)}}});